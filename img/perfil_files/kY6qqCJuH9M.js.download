;/*FB_PKG_DELIM*/

__d("PolarisProfilePostsGrid_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"PolarisProfilePostsGrid_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW",path:"pk"},{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisVirtualPostsGrid_media"},{args:null,kind:"FragmentSpread",name:"PolarisProfilePostsGridInstantModal_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisProfilePostsGrid.react",["CometPlaceholder.react","CometRelay","PolarisLinkBuilder","PolarisMediaViewerNavigationUtils.react","PolarisProfilePostsActionConstants","PolarisProfilePostsGrid_media.graphql","PolarisSizing","PolarisVirtualPostsGrid.next.react","deferredLoadComponent","logPolarisPostModalOpen","qex","react","requireDeferred","useCometRouterDispatcher","usePolarisDisplayProperties","usePolarisProfileOnPostImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;e.useCallback;e.useMemo;var k=e.useState,l=e.unstable_useMemoCache,m=c("deferredLoadComponent")(c("requireDeferred")("PolarisProfilePostsGridInstantModal.react").__setRef("PolarisProfilePostsGrid.react"));function n(a){return a.filter(function(a){return a.code!=null}).map(function(a){var b=a.original_height!=null&&a.original_width!=null?{height:a.original_height,width:a.original_width}:null;return{dimensions:b,shortcode:(b=a.code)!=null?b:""}})}function a(a){var e=l(42),f=a.analyticsContext,g=a.hasNext,i=a.isLoadingError,o=a.isLoadingNext,p=a.media$key,q=a.onLoadNext;a=a.profileUserID;var r=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisProfilePostsGrid_media.graphql"),p),s=c("usePolarisDisplayProperties")();s=s.viewportWidth;var t=k(null),u=t[0],v=t[1];t=k(null);var w=t[0],x=t[1],y=d("PolarisSizing").shouldSpawnModals(s),z=c("useCometRouterDispatcher")();t=n(r);var A=t,B=d("PolarisMediaViewerNavigationUtils.react").useHandleNextPageForPostViewer(A,q,d("PolarisMediaViewerNavigationUtils.react").hasImmersiveViewerPagination());e[0]!==r||e[1]!==f||e[2]!==g||e[3]!==o||e[4]!==q?(s=function(a,b){var e=r.find(function(b){return a===b.pk});v(e);x(location.pathname);c("logPolarisPostModalOpen")(f,e==null?void 0:e.media_type,"media_browser");b!=null&&(g&&!o&&r.length-1-b<=d("PolarisProfilePostsActionConstants").FETCH_MORE_THRESHOLD&&q())},e[0]=r,e[1]=f,e[2]=g,e[3]=o,e[4]=q,e[5]=s):s=e[5];var C=s;e[6]!==y||e[7]!==r||e[8]!==z||e[9]!==A||e[10]!==B||e[11]!==C?(t=function(a,b){if(y){var e=r.findIndex(function(a){return b===a.pk}),f=r[e],g=f.code;if(g!=null&&c("qex")._("348")===!0){g=d("PolarisLinkBuilder").buildImmersiveMediaLink(g);z==null?void 0:z.go(g,{passthroughProps:{chainingItems:A,dimensions:f.original_height!=null&&f.original_width!=null?{height:f.original_height,width:f.original_width}:null,loadMore:B}})}else C(r[e].pk,e);a.preventDefault()}},e[6]=y,e[7]=r,e[8]=z,e[9]=A,e[10]=B,e[11]=C,e[12]=t):t=e[12];s=t;var D=c("usePolarisProfileOnPostImpression")();e[13]!==r||e[14]!==D?(t=function(a){var b=r.find(function(b){return a===b.pk}),c=(b==null?void 0:b.media_type)===8?"sidecar":(b==null?void 0:b.media_type)===2?"video":"photo";D({mediaType:c,ownerID:b==null?void 0:(c=b.owner)==null?void 0:c.id,postID:a})},e[13]=r,e[14]=D,e[15]=t):t=e[15];t=t;var E;e[16]===Symbol["for"]("react.memo_cache_sentinel")?(E=function(){v(null),x(null)},e[16]=E):E=e[16];E=E;var F;e[17]!==r?(F=r.map(function(a){return a.pk}),e[17]=r,e[18]=F):F=e[18];F=F;var G;e[19]!==s||e[20]!==t||e[21]!==a||e[22]!==y?(G={mediaLinkBuilder:d("PolarisLinkBuilder").buildDynamicMediaLink,onClick:s,onImpression:t,profileUserId:a,shouldSpawnModals:y},e[19]=s,e[20]=t,e[21]=a,e[22]=y,e[23]=G):G=e[23];e[24]!==f||e[25]!==g||e[26]!==i||e[27]!==o||e[28]!==G||e[29]!==r||e[30]!==q||e[31]!==p.length?(s=j.jsx(c("PolarisVirtualPostsGrid.next.react"),{analyticsContext:f,hasNext:g,isLoadingError:i,isLoadingNext:o,itemProps:G,media$key:r,onLoadNext:q,visibleCount:p.length}),e[24]=f,e[25]=g,e[26]=i,e[27]=o,e[28]=G,e[29]=r,e[30]=q,e[31]=p.length,e[32]=s):s=e[32];e[33]!==u||e[34]!==f||e[35]!==w||e[36]!==C||e[37]!==F?(t=u!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(m,{analyticsContext:f,media$key:u,mediaLinkBuilder:d("PolarisLinkBuilder").buildMediaLink,modalEntryPath:w,onClose:E,onOpen:C,postIDs:F})}):null,e[33]=u,e[34]=f,e[35]=w,e[36]=C,e[37]=F,e[38]=t):t=e[38];e[39]!==s||e[40]!==t?(a=j.jsxs(j.Fragment,{children:[s,t]}),e[39]=s,e[40]=t,e[41]=a):a=e[41];return a}g["default"]=a}),98);
__d("PolarisProfilePostsTabContent.react",["CometPlaceholder.react","CometRelay","CometRouteURL","JSResourceForInteraction","PolarisConfig","PolarisConnectionsLogger","PolarisPostDeleteContextProvider.react","PolarisProfilePostsGrid.react","PolarisProfilePostsQuery.graphql","PolarisProfilePostsTabContentFragment","PolarisProfileTabContentSpinner.react","PolarisSimilarAccountsModalLazy.react","PolarisUA","igMapTypenameToRelayID","lazyLoadComponent","react","usePolarisIsSmallScreen","usePolarisProfileTabNextPageLoader","usePolarisRemoveNodeFromConnection"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.useState,k=b.unstable_useMemoCache,l=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisProfileNewUserActivatorsUnit.react").__setRef("PolarisProfilePostsTabContent.react")),m=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisEmptyProfileOtherUsers.react").__setRef("PolarisProfilePostsTabContent.react"));function a(a){var b=k(25),e=a.contentQuery,f=a.userID;a=a.username;e=d("CometRelay").usePreloadedQuery(c("PolarisProfilePostsQuery.graphql"),e);e=d("CometRelay").usePaginationFragment(c("PolarisProfilePostsTabContentFragment"),e);var g=e.data,h=e.hasNext,n=e.isLoadingNext;e=e.loadNext;var o=j(!1),p=o[0];o=o[1];if(b[0]!==g.xdt_api__v1__feed__user_timeline_graphql_connection.edges){var q;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(q=function(a){a=a.node;return a},b[2]=q):q=b[2];q=g.xdt_api__v1__feed__user_timeline_graphql_connection.edges.flatMap(q);b[0]=g.xdt_api__v1__feed__user_timeline_graphql_connection.edges;b[1]=q}else q=b[1];q=q;q=q;e=c("usePolarisProfileTabNextPageLoader")({loadNext:e,setIsLoadingError:o});o=((o=g.xdt_viewer)==null?void 0:(o=o.user)==null?void 0:o.id)===f;var r=c("usePolarisIsSmallScreen")(),s=j(null),t=s[0],u=s[1];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(s=function(a){d("PolarisUA").isMobile()||(a.preventDefault(),u("similarAccounts"))},b[3]=s):s=b[3];s=s;var v;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(v=function(){u(null)},b[4]=v):v=b[4];v=v;var w=g.xdt_api__v1__feed__user_timeline_graphql_connection.__id,x=c("usePolarisRemoveNodeFromConnection")();b[5]!==x||b[6]!==w?(g=function(a){a=c("igMapTypenameToRelayID")("XDTMediaDict",a,null);x(w,a)},b[5]=x,b[6]=w,b[7]=g):g=b[7];g=g;if(q.length===0&&!h&&!n){b[8]!==o||b[9]!==r||b[10]!==f||b[11]!==a||b[12]!==t?(s=o?i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("PolarisProfileTabContentSpinner.react"),{}),children:i.jsx(l,{inDesktopFeedCreationUpsellQE:!0})}):i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("PolarisProfileTabContentSpinner.react"),{}),children:i.jsxs(i.Fragment,{children:[i.jsx(m,{analyticsContext:d("PolarisConnectionsLogger").CONNECTIONS_CONTAINER_MODULES.profile,isSmallScreen:r,onSeeAllClicked:s,userID:f,username:a}),t?i.jsx(c("PolarisSimilarAccountsModalLazy.react"),{entryPath:d("CometRouteURL").getWindowURL(),onClose:v,pageId:t,userID:f,username:a}):null]})}),b[8]=o,b[9]=r,b[10]=f,b[11]=a,b[12]=t,b[13]=s):s=b[13];return s}v=d("PolarisConfig").getViewerId()===f?"selfProfilePage":"profilePage";b[14]!==v||b[15]!==h||b[16]!==p||b[17]!==n||b[18]!==q||b[19]!==e||b[20]!==f?(o=i.jsx(c("PolarisProfilePostsGrid.react"),{analyticsContext:v,hasNext:h,isLoadingError:p,isLoadingNext:n,media$key:q,onLoadNext:e,profileUserID:f}),b[14]=v,b[15]=h,b[16]=p,b[17]=n,b[18]=q,b[19]=e,b[20]=f,b[21]=o):o=b[21];b[22]!==g||b[23]!==o?(r=i.jsx(c("PolarisPostDeleteContextProvider.react"),{onDeleted:g,children:o}),b[22]=g,b[23]=o,b[24]=r):r=b[24];return r}g["default"]=a}),98);